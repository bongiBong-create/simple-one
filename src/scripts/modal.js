const modalBtn = document.getElementById("create__task");

export const initModal = () => {
  modalBtn.addEventListener("click", () => {
    const modal = document.createElement("div");
    modal.classList.add("modal");
    modal.id = "modal";
    const modalHtml = `
      <div class="modal__main">
        <div class="modal__header">
          <div class="content__header--box">
            <p>Подзадача</p>
          </div>
          <div class="content__header--btns">
            <button class="content__header--bts__btn">Сохранить</button>
            <button id="modal__cancel" class="content__header--bts__btn">Отменить</button>
          </div>
          <button id="modal__cancel" class="modal__cancel--second">
            <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path
                d="M6.47336 10.4749C6.21336 10.7349 5.78671 10.7349 5.52671 10.4749C5.26671 10.2149 5.26671 9.78833 5.52671 9.52833L7.05336 8.00164L5.52671 6.47495C5.26671 6.21495 5.26671 5.78833 5.52671 5.52833C5.78671 5.26833 6.21336 5.26833 6.47336 5.52833L8.00003 7.05503L9.52671 5.52833C9.78671 5.26833 10.2134 5.26833 10.4734 5.52833C10.7334 5.78833 10.7334 6.21495 10.4734 6.47495L8.94671 8.00164L10.4734 9.52833C10.7334 9.78833 10.7334 10.2149 10.4734 10.4749C10.2134 10.7349 9.78671 10.7349 9.52671 10.4749L8.00003 8.94826L6.47336 10.4749Z"
                fill="#ABB1BA" />
              <path fill-rule="evenodd" clip-rule="evenodd"
                d="M15.3333 8.00163C15.3333 12.055 12.0533 15.335 8 15.335C3.94667 15.335 0.666667 12.055 0.666667 8.00163C0.666667 3.94829 3.94667 0.668294 8 0.668294C12.0533 0.668294 15.3333 3.94829 15.3333 8.00163ZM14 8.00163C14 4.68829 11.3133 2.00163 8 2.00163C4.68667 2.00163 2 4.68829 2 8.00163C2 11.315 4.68667 14.0016 8 14.0016C11.3133 14.0016 14 11.315 14 8.00163Z"
                fill="#ABB1BA" />
            </svg>
          </button>
        </div>
        <form>
          <h2 class="title">Новая запись</h2>
          <div>
            <label for="theme"><span>*</span>Тема</label>
            <input id="theme" type="text" placeholder="Тема" required>
          </div>
          <div>
            <label for="description">Описание</label>
            <input id="description" type="text">
            <div>
              <label for="notes"><span>*</span>Рабочие заметки</label>
              <input id="notes" type="text" required>
            </div>
            <div id="form__responsible">
              <div>
                <label for="responsible"><span>*</span>Ответственный</label>
                <input id="responsible" type="text">
              </div>
              <div class="form__btns">
                <button>
                  <svg width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path
                      d="M7.83333 1.16667C7.83333 0.706429 7.46024 0.333333 7 0.333333C6.53976 0.333333 6.16667 0.706429 6.16667 1.16667V6.16667H1.16667C0.706429 6.16667 0.333333 6.53976 0.333333 7C0.333333 7.46024 0.706429 7.83333 1.16667 7.83333H6.16667V12.8333C6.16667 13.2936 6.53976 13.6667 7 13.6667C7.46024 13.6667 7.83333 13.2936 7.83333 12.8333V7.83333H12.8333C13.2936 7.83333 13.6667 7.46024 13.6667 7C13.6667 6.53976 13.2936 6.16667 12.8333 6.16667H7.83333V1.16667Z"
                      fill="#2E3238" />
                  </svg>
                </button>
                <button>
                  <svg width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path fill-rule="evenodd" clip-rule="evenodd"
                      d="M10.0785 11.0212C9.05204 11.8423 7.75002 12.3333 6.33333 12.3333C3.01962 12.3333 0.333333 9.64704 0.333333 6.33333C0.333333 3.01962 3.01962 0.333333 6.33333 0.333333C9.64704 0.333333 12.3333 3.01962 12.3333 6.33333C12.3333 7.74999 11.8424 9.05198 11.0213 10.0784L13.4714 12.5285C13.7318 12.7889 13.7318 13.211 13.4714 13.4713C13.2111 13.7317 12.7889 13.7317 12.5286 13.4713L10.0785 11.0212ZM1.66667 6.33333C1.66667 3.756 3.756 1.66667 6.33333 1.66667C8.91066 1.66667 11 3.756 11 6.33333C11 7.5905 10.5029 8.73156 9.69451 9.57067C9.6716 9.58826 9.64957 9.60755 9.62859 9.62853C9.60761 9.64951 9.58832 9.67155 9.57072 9.69446C8.73161 10.5029 7.59053 11 6.33333 11C3.756 11 1.66667 8.91066 1.66667 6.33333Z"
                      fill="#2E3238" />
                  </svg>
                </button>
              </div>
            </div>
          </div>
          <div>
            <label for="status">Статус</label>
            <input id="status" type="text">
          </div>
          <div id="product__form">
            <div>
              <label for="product">Продукт</label>
              <input id="product" type="text">
            </div>
            <button class="product__btn">
              <svg width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path fill-rule="evenodd" clip-rule="evenodd"
                  d="M10.0785 11.0212C9.05204 11.8423 7.75002 12.3333 6.33333 12.3333C3.01962 12.3333 0.333333 9.64704 0.333333 6.33333C0.333333 3.01962 3.01962 0.333333 6.33333 0.333333C9.64704 0.333333 12.3333 3.01962 12.3333 6.33333C12.3333 7.74999 11.8424 9.05198 11.0213 10.0784L13.4714 12.5285C13.7318 12.7889 13.7318 13.211 13.4714 13.4713C13.2111 13.7317 12.7889 13.7317 12.5286 13.4713L10.0785 11.0212ZM1.66667 6.33333C1.66667 3.756 3.756 1.66667 6.33333 1.66667C8.91066 1.66667 11 3.756 11 6.33333C11 7.5905 10.5029 8.73156 9.69451 9.57067C9.6716 9.58826 9.64957 9.60755 9.62859 9.62853C9.60761 9.64951 9.58832 9.67155 9.57072 9.69446C8.73161 10.5029 7.59053 11 6.33333 11C3.756 11 1.66667 8.91066 1.66667 6.33333Z"
                  fill="#2E3238" />
              </svg>
            </button>
          </div>
          <div>
            <label for="priority">Приоритет</label>
            <input id="priority" type="text">
          </div>
          <div id="form__group">
            <div>
              <label for="group">Группа</label>
              <input id="group" type="text">
            </div>
            <div class="form__btns">
              <button>
                <svg width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path
                    d="M7.83333 1.16667C7.83333 0.706429 7.46024 0.333333 7 0.333333C6.53976 0.333333 6.16667 0.706429 6.16667 1.16667V6.16667H1.16667C0.706429 6.16667 0.333333 6.53976 0.333333 7C0.333333 7.46024 0.706429 7.83333 1.16667 7.83333H6.16667V12.8333C6.16667 13.2936 6.53976 13.6667 7 13.6667C7.46024 13.6667 7.83333 13.2936 7.83333 12.8333V7.83333H12.8333C13.2936 7.83333 13.6667 7.46024 13.6667 7C13.6667 6.53976 13.2936 6.16667 12.8333 6.16667H7.83333V1.16667Z"
                    fill="#2E3238" />
                </svg>
              </button>
              <button>
                <svg width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path fill-rule="evenodd" clip-rule="evenodd"
                    d="M10.0785 11.0212C9.05204 11.8423 7.75002 12.3333 6.33333 12.3333C3.01962 12.3333 0.333333 9.64704 0.333333 6.33333C0.333333 3.01962 3.01962 0.333333 6.33333 0.333333C9.64704 0.333333 12.3333 3.01962 12.3333 6.33333C12.3333 7.74999 11.8424 9.05198 11.0213 10.0784L13.4714 12.5285C13.7318 12.7889 13.7318 13.211 13.4714 13.4713C13.2111 13.7317 12.7889 13.7317 12.5286 13.4713L10.0785 11.0212ZM1.66667 6.33333C1.66667 3.756 3.756 1.66667 6.33333 1.66667C8.91066 1.66667 11 3.756 11 6.33333C11 7.5905 10.5029 8.73156 9.69451 9.57067C9.6716 9.58826 9.64957 9.60755 9.62859 9.62853C9.60761 9.64951 9.58832 9.67155 9.57072 9.69446C8.73161 10.5029 7.59053 11 6.33333 11C3.756 11 1.66667 8.91066 1.66667 6.33333Z"
                    fill="#2E3238" />
                </svg>
              </button>
            </div>
          </div>
          <div class="comments">
            <label for="comment">Комментарии</label>
            <input id="comment" type="text">
          </div>
          <div class="coordinating">
            <label for="coordinats">Согласующие</label>
            <div id="coordinats">
              <div class="coordinats__el">Андрей пивоваров</div>
            </div>
          </div>
          <div id="form__date">
            <div>
              <label for="open">Когда открыто</label>
              <input id="open" type="text">
            </div>
            <button class="calendar__btn">
              <svg width="18" height="20" viewBox="0 0 18 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path
                  d="M3.16667 19.1687H14.8333C16.2167 19.1687 17.3333 18.052 17.3333 16.6687V5.00203C17.3333 3.6187 16.2167 2.50203 14.8333 2.50203H13.1667V1.6687C13.1667 1.21037 12.7917 0.835368 12.3333 0.835368C11.875 0.835368 11.5 1.21037 11.5 1.6687V2.50203H6.5V1.6687C6.5 1.21037 6.125 0.835368 5.66667 0.835368C5.20833 0.835368 4.83333 1.21037 4.83333 1.6687V2.50203H3.16667C1.78333 2.50203 0.666667 3.6187 0.666667 5.00203V16.6687C0.666667 18.052 1.78333 19.1687 3.16667 19.1687ZM14.8333 17.502H3.16667C2.70833 17.502 2.33333 17.127 2.33333 16.6687V9.1687H15.6667V16.6687C15.6667 17.127 15.2917 17.502 14.8333 17.502ZM3.16667 4.1687H4.83333V5.00203C4.83333 5.46037 5.20833 5.83537 5.66667 5.83537C6.125 5.83537 6.5 5.46037 6.5 5.00203V4.1687H11.5V5.00203C11.5 5.46037 11.875 5.83537 12.3333 5.83537C12.7917 5.83537 13.1667 5.46037 13.1667 5.00203V4.1687H14.8333C15.2917 4.1687 15.6667 4.5437 15.6667 5.00203V7.50203H2.33333V5.00203C2.33333 4.5437 2.70833 4.1687 3.16667 4.1687Z"
                  fill="#2E3238" />
              </svg>
            </button>
          </div>
          <div id="form__opened">
            <div>
              <label for="opened">Кем открыто</label>
              <input id="opened" type="text">
            </div>
            <div class="form__btns">
              <button>
                <svg width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path
                    d="M7.83333 1.16667C7.83333 0.706429 7.46024 0.333333 7 0.333333C6.53976 0.333333 6.16667 0.706429 6.16667 1.16667V6.16667H1.16667C0.706429 6.16667 0.333333 6.53976 0.333333 7C0.333333 7.46024 0.706429 7.83333 1.16667 7.83333H6.16667V12.8333C6.16667 13.2936 6.53976 13.6667 7 13.6667C7.46024 13.6667 7.83333 13.2936 7.83333 12.8333V7.83333H12.8333C13.2936 7.83333 13.6667 7.46024 13.6667 7C13.6667 6.53976 13.2936 6.16667 12.8333 6.16667H7.83333V1.16667Z"
                    fill="#2E3238" />
                </svg>
              </button>
              <button>
                <svg width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path fill-rule="evenodd" clip-rule="evenodd"
                    d="M10.0785 11.0212C9.05204 11.8423 7.75002 12.3333 6.33333 12.3333C3.01962 12.3333 0.333333 9.64704 0.333333 6.33333C0.333333 3.01962 3.01962 0.333333 6.33333 0.333333C9.64704 0.333333 12.3333 3.01962 12.3333 6.33333C12.3333 7.74999 11.8424 9.05198 11.0213 10.0784L13.4714 12.5285C13.7318 12.7889 13.7318 13.211 13.4714 13.4713C13.2111 13.7317 12.7889 13.7317 12.5286 13.4713L10.0785 11.0212ZM1.66667 6.33333C1.66667 3.756 3.756 1.66667 6.33333 1.66667C8.91066 1.66667 11 3.756 11 6.33333C11 7.5905 10.5029 8.73156 9.69451 9.57067C9.6716 9.58826 9.64957 9.60755 9.62859 9.62853C9.60761 9.64951 9.58832 9.67155 9.57072 9.69446C8.73161 10.5029 7.59053 11 6.33333 11C3.756 11 1.66667 8.91066 1.66667 6.33333Z"
                    fill="#2E3238" />
                </svg>
              </button>
            </div>
          </div>
          <div id="form__date">
            <div>
              <label for="create">Когда создано</label>
              <input id="create" type="date">
            </div>
            <button class="calendar__btn">
              <svg width="18" height="20" viewBox="0 0 18 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path
                  d="M3.16667 19.1687H14.8333C16.2167 19.1687 17.3333 18.052 17.3333 16.6687V5.00203C17.3333 3.6187 16.2167 2.50203 14.8333 2.50203H13.1667V1.6687C13.1667 1.21037 12.7917 0.835368 12.3333 0.835368C11.875 0.835368 11.5 1.21037 11.5 1.6687V2.50203H6.5V1.6687C6.5 1.21037 6.125 0.835368 5.66667 0.835368C5.20833 0.835368 4.83333 1.21037 4.83333 1.6687V2.50203H3.16667C1.78333 2.50203 0.666667 3.6187 0.666667 5.00203V16.6687C0.666667 18.052 1.78333 19.1687 3.16667 19.1687ZM14.8333 17.502H3.16667C2.70833 17.502 2.33333 17.127 2.33333 16.6687V9.1687H15.6667V16.6687C15.6667 17.127 15.2917 17.502 14.8333 17.502ZM3.16667 4.1687H4.83333V5.00203C4.83333 5.46037 5.20833 5.83537 5.66667 5.83537C6.125 5.83537 6.5 5.46037 6.5 5.00203V4.1687H11.5V5.00203C11.5 5.46037 11.875 5.83537 12.3333 5.83537C12.7917 5.83537 13.1667 5.46037 13.1667 5.00203V4.1687H14.8333C15.2917 4.1687 15.6667 4.5437 15.6667 5.00203V7.50203H2.33333V5.00203C2.33333 4.5437 2.70833 4.1687 3.16667 4.1687Z"
                  fill="#2E3238" />
              </svg>
            </button>
          </div>
          <div id="form__created">
            <div>
              <label for="created">Кем создано</label>
              <input id="created" type="text">
            </div>
            <div class="form__btns">
              <button>
                <svg width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path
                    d="M7.83333 1.16667C7.83333 0.706429 7.46024 0.333333 7 0.333333C6.53976 0.333333 6.16667 0.706429 6.16667 1.16667V6.16667H1.16667C0.706429 6.16667 0.333333 6.53976 0.333333 7C0.333333 7.46024 0.706429 7.83333 1.16667 7.83333H6.16667V12.8333C6.16667 13.2936 6.53976 13.6667 7 13.6667C7.46024 13.6667 7.83333 13.2936 7.83333 12.8333V7.83333H12.8333C13.2936 7.83333 13.6667 7.46024 13.6667 7C13.6667 6.53976 13.2936 6.16667 12.8333 6.16667H7.83333V1.16667Z"
                    fill="#2E3238" />
                </svg>
              </button>
              <button>
                <svg width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path fill-rule="evenodd" clip-rule="evenodd"
                    d="M10.0785 11.0212C9.05204 11.8423 7.75002 12.3333 6.33333 12.3333C3.01962 12.3333 0.333333 9.64704 0.333333 6.33333C0.333333 3.01962 3.01962 0.333333 6.33333 0.333333C9.64704 0.333333 12.3333 3.01962 12.3333 6.33333C12.3333 7.74999 11.8424 9.05198 11.0213 10.0784L13.4714 12.5285C13.7318 12.7889 13.7318 13.211 13.4714 13.4713C13.2111 13.7317 12.7889 13.7317 12.5286 13.4713L10.0785 11.0212ZM1.66667 6.33333C1.66667 3.756 3.756 1.66667 6.33333 1.66667C8.91066 1.66667 11 3.756 11 6.33333C11 7.5905 10.5029 8.73156 9.69451 9.57067C9.6716 9.58826 9.64957 9.60755 9.62859 9.62853C9.60761 9.64951 9.58832 9.67155 9.57072 9.69446C8.73161 10.5029 7.59053 11 6.33333 11C3.756 11 1.66667 8.91066 1.66667 6.33333Z"
                    fill="#2E3238" />
                </svg>
              </button>
            </div>
          </div>
          <div class="content__header--btns">
            <button class="content__header--bts__btn">Сохранить</button>
            <button id="modal__cancel" class="content__header--bts__btn">Отменить</button>
          </div>
        </form>
      </div>
    `;

    modal.innerHTML = modalHtml;
    document.body.appendChild(modal);

    const modalCancels = document.querySelectorAll("#modal__cancel");
    const modalId = document.getElementById("modal");

    const modalActive = () => {
      modalId.style.display = "block";
    };

    const modalNotActive = () => {
      modalId.style.display = "none";
    };

    modalCancels.forEach((item) =>
      item.addEventListener("click", modalNotActive)
    );

    document.addEventListener("keydown", (event) => {
      if (event.key === "Escape" || event.key === "Enter") {
        modalNotActive();
      }
    });

    modalActive();
  });
};
